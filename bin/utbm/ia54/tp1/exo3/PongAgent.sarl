/**
 * 
 */
package utbm.ia54.tp1.exo3

import io.sarl.core.Behaviors
import io.sarl.core.DefaultContextInteractions
import io.sarl.core.Initialize
import io.sarl.core.Logging
import io.sarl.util.OpenEventSpace
import io.sarl.util.OpenEventSpaceSpecification
import java.util.UUID

/**
 * @author Lucas
 *
 */
 
agent PongAgent {
	uses Logging, DefaultContextInteractions, Behaviors
	
	var space : OpenEventSpace
	
	on Initialize {
		space = defaultContext.getOrCreateSpaceWithSpec(
			typeof(OpenEventSpaceSpecification),
			occurrence.parameters.get(0) as UUID
		)
		space.register(asEventListener())
	}
	on Ping{
		println("Ping received #" + occurrence.index)
		var evt = new Pong(occurrence.index)
		evt.source = space.getAddress(getID)
		println("Pong emitted #" + evt.index)
		space.emit(evt)
	}
}